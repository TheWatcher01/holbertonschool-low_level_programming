# Variables
CC := gcc
SRC := main.c school.c
OBJ := $(SRC:.c=.o)
NAME := school
CFLAGS := -Wall -Werror -Wextra -pedantic
COMPILE := $(CC) $(CFLAGS) -c

# Default rule
all: $(NAME)

# Linking the executable
$(NAME): $(OBJ)
	@$(CC) $(OBJ) -o $(NAME)

# Compiling source files into object files using implicit rules
%.o: %.c m.h
	@$(COMPILE) $< -o $@

# Cleaning rules
clean:
	@find . \( -name "*~" -o -name "\#*\#" -o -name "$(NAME)" \) -delete

oclean:
	@rm -f $(OBJ)

fclean: clean oclean

# Forcing recompilation
re: fclean all

# Prevent make from misinterpreting filenames as make commands
.PHONY: all clean oclean fclean re
